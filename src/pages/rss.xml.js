---
import rss from '@astrojs/rss';import fs from 'fs';
export const GET = async (context)=>{const root=new URL('../content/trends/', import.meta.url);function walk(d){const p=new URL('.',d);const e=fs.readdirSync(p);let files=[];for(const x of e){const f=new URL(x+'/',p);if(fs.statSync(f).isDirectory()){files=files.concat(walk(f));}else if(x.endsWith('.md') && x!=='index.json'){files.push(new URL(x,p));}}return files;}const files=walk(root);const posts=files.map(u=>{const t=fs.readFileSync(u,'utf-8');const g=(k)=> new RegExp(`${k}:\\s*\"?([^\"\\n]+)`).exec(t)?.[1]||'';return {slug:g('slug'),title:g('title'),date:g('date')}}).sort((a,b)=>a.date<b.date?1:-1).slice(0,30);return rss({title:'Teknovashop Tendencias',description:'Ranking diario con miniâ€‘reviews',site:context.site,items:posts.map(p=>({title:p.title,pubDate:new Date(p.date),link:`/producto/${p.slug}`}))});};
---