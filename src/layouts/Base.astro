---
const {
  title = 'Teknovashop · Productos inteligentes seleccionados',
  description = 'Plataforma de nicho para productos inteligentes: comparativas, guías y reseñas claras para comprar bien.',
} = Astro.props;

const url = Astro.url?.origin || 'https://teknovashop.com';
const canonical = `${url}${Astro.url?.pathname || '/'}`;
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />

    <link rel="canonical" href={canonical} />
    <link rel="icon" href="/brand/teknovashop-tendencias.png" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Tipografía del sistema para máximo rendimiento -->
    <link rel="stylesheet" href="/styles.css" />

    <!-- OpenGraph / Twitter -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Teknovashop" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonical} />
    <meta property="og:image" content={`${url}/brand/teknovashop-tendencias.png`} />
    <meta name="twitter:card" content="summary_large_image" />

    <!-- JSON-LD: Organización + Buscador interno -->
    <script type="application/ld+json">
      {JSON.stringify({
        '@context': 'https://schema.org',
        '@type': 'Organization',
        name: 'Teknovashop',
        url,
        logo: `${url}/brand/teknovashop-tendencias.png`,
        sameAs: ['https://www.instagram.com/', 'https://www.tiktok.com/']
      })}
    </script>
    <script type="application/ld+json">
      {JSON.stringify({
        '@context': 'https://schema.org',
        '@type': 'WebSite',
        url,
        potentialAction: {
          '@type': 'SearchAction',
          target: `${url}/comparador?q={search_term_string}`,
          'query-input': 'required name=search_term_string'
        }
      })}
    </script>

    <style>
      /* Pequeños estilos de cabecera para resaltar la pestaña activa */
      .nav a.active{ background: var(--surface-3); color: var(--ink-1); }
    </style>
  </head>
  <body>
    <header class="site-top">
      <div class="wrap row-between gap-16">
        <a class="brand row-center gap-12" href="/" aria-label="Teknovashop inicio">
          <img src="/brand/teknovashop-tendencias.png" width="36" height="36" alt="" class="logo" loading="eager" />
          <span class="brand-title">Teknovashop <b>Inteligentes</b></span>
        </a>

        <nav class="nav row-center gap-4" aria-label="Principal">
          <a href="/hoy" class={Astro.url.pathname.startsWith('/hoy') ? 'active' : ''}>Hoy</a>
          <a href="/archivo" class={Astro.url.pathname.startsWith('/archivo') ? 'active' : ''}>Archivo</a>
          <a href="/comparador" class={Astro.url.pathname.startsWith('/comparador') ? 'active' : ''}>Comparador</a>
          <a href="/acerca" class={Astro.url.pathname.startsWith('/acerca') ? 'active' : ''}>Acerca</a>
        </nav>
      </div>
    </header>

    <main class="wrap main">
      <slot />
    </main>

    <footer class="site-foot">
      <div class="wrap">
        <div class="foot-grid">
          <div>
            <div class="row-center gap-12">
              <img src="/brand/teknovashop-tendencias.png" alt="" width="28" height="28" class="logo" />
              <strong>Teknovashop</strong>
            </div>
            <p class="muted mt-8">Plataforma de nicho para productos inteligentes: seleccionamos, comparamos y explicamos.</p>
          </div>

          <div>
            <h4>Enlaces</h4>
            <ul class="list">
              <li><a href="/hoy">Tendencias de hoy</a></li>
              <li><a href="/archivo">Archivo</a></li>
              <li><a href="/comparador">Comparador</a></li>
              <li><a href="/acerca">Acerca</a></li>
              <li><a href="/legal">Avisos legales</a></li>
            </ul>
          </div>

          <div>
            <h4>Boletín</h4>
            <p class="muted">Un email a la semana con chollos y guías útiles (sin spam).</p>
            <form class="row gap-8 mt-8" onsubmit="event.preventDefault(); alert('¡Gracias!');">
              <input class="input" type="email" placeholder="tu@email.com" aria-label="Correo" required />
              <button class="btn">Suscribirme</button>
            </form>
          </div>
        </div>

        <div class="foot-meta">
          <small>© {new Date().getFullYear()} Teknovashop · Algunos enlaces pueden ser de afiliado · <a href="/legal">Avisos legales</a></small>
        </div>
      </div>
    </footer>
  </body>
</html>
